(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{18:function(e,t,a){e.exports={loginPage:"styles_loginPage__1D9qK",loginBox:"styles_loginBox__3pA7P",settings:"styles_settings__3zuzl",authors:"styles_authors__2Tykn"}},20:function(e,t,a){e.exports={header:"styles_header__3BYpN",user:"styles_user__2EsA3",userPhoto:"styles_userPhoto__3F6JL",score:"styles_score__1LNZn"}},28:function(e,t,a){e.exports={container:"styles_container__2Tr53",score:"styles_score__2sycK"}},37:function(e,t,a){e.exports=a.p+"static/media/trophy.bacdab71.svg"},38:function(e,t,a){e.exports={loading:"styles_loading__2HZjI",spinLoading:"styles_spinLoading__22xVn"}},40:function(e,t,a){e.exports={gamePage:"styles_gamePage__2Ynb1"}},42:function(e,t,a){e.exports=a(57)},52:function(e,t,a){},55:function(e,t){},57:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(21),i=a.n(s),o=a(8),c=a(3),l=a(17),u=a(34),m=a(33),d=a(4),p=a(5),f=a.n(p),h=function(){var e,t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=a.sent,a.next=5,f.a.awrap(e.json());case 5:return t=a.sent,localStorage.setItem("token",JSON.stringify(t.token)),a.abrupt("return",t);case 8:case"end":return a.stop()}}))},b=function(){var e,t,a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(h());case 2:return e=localStorage.getItem("token").replace(/"/g,""),n.next=5,f.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 5:return t=n.sent,n.next=8,f.a.awrap(t.json());case 8:return a=n.sent,n.abrupt("return",a);case 10:case"end":return n.stop()}}))},g=function(e,t){return{type:"TOKEN_SUCCESS",token:e,user:t}};var E={user:{},isLoading:!1,token:null,error:null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN_SUCCESS":return Object(d.a)({},e,{token:t.token,isLoading:!1,user:t.user});case"TOKEN_ERROR":return Object(d.a)({},e,{error:t.payload,isLoading:!1});case"TOKEN_RESPONSE":return Object(d.a)({},e,{isLoading:!0});default:return e}};function v(e){return{type:"GET_QUESTIONS_SUCCESS",payload:e}}var _={error:null,isLoading:!1,questions:{},totalScore:0};var w=Object(l.combineReducers)({settings:y,game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_QUESTIONS":return Object(d.a)({},e,{isLoading:!0});case"GET_QUESTIONS_SUCCESS":return Object(d.a)({},e,{isLoading:!1,questions:n});case"GET_QUESTIONS_ERROR":return Object(d.a)({},e,{isLoading:!1,error:n});case"RESET_GAME":return _;case"ADD_SCORE":return Object(d.a)({},e,{totalScore:e.totalScore+n});default:return e}}}),S=Object(l.createStore)(w,Object(m.composeWithDevTools)(Object(l.applyMiddleware)(u.a))),O=(a(52),a(2)),k=a(22),j=a(10),N=a(11),x=a(13),T=a(12),I=a(15),C=a(14),R=a(36),Q=a(18),q=a.n(Q);var P=function(){return r.a.createElement("span",{className:q.a.authors},"Desenvolvido por:",r.a.createElement("a",{href:"https://github.com/mateussays",target:"_blank",rel:"noopener noreferrer"},"\xc9drei Mateus"),",",r.a.createElement("a",{href:"https://github.com/nascjoao",target:"_blank",rel:"noopener noreferrer"},"Jo\xe3o Nasc"),",",r.a.createElement("a",{href:"https://github.com/ScriptCamilo",target:"_blank",rel:"noopener noreferrer"},"Camilo"),"e",r.a.createElement("a",{href:"https://github.com/WendrickBarreto",target:"_blank",rel:"noopener noreferrer"},"Wendrick Barreto"),".")},B=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(x.a)(this,Object(T.a)(t).call(this,e))).state={fields:{name:"",email:""},playBtn:{isDisabled:!0}},a.handleInput=a.handleInput.bind(Object(I.a)(a)),a.goToGamePage=a.goToGamePage.bind(Object(I.a)(a)),a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.fields,n=t.fields.name!==a.name,r=t.fields.email!==a.email;(n||r)&&this.buttonValidation()}},{key:"handleInput",value:function(e){var t=e.target,a=t.id,n=t.value,r=this.state.fields;this.setState({fields:Object(d.a)({},r,Object(k.a)({},a,n))})}},{key:"buttonValidation",value:function(){var e=this.state,t=e.fields,a=e.playBtn;this.setState({playBtn:Object(d.a)({},a,{isDisabled:!(""!==t.name&&""!==t.email)})})}},{key:"goToGamePage",value:function(e){e.preventDefault();var t=this.state.fields,a=this.props,n=a.getToken,r=a.getQuestions,s=a.history.push;n(t),r(),s("/game")}},{key:"render",value:function(){var e=this.state,t=e.playBtn,a=e.fields;return r.a.createElement("div",{className:q.a.loginPage},r.a.createElement("img",{src:"logo.png",alt:""}),r.a.createElement("form",{className:q.a.loginBox,onSubmit:this.goToGamePage},r.a.createElement("input",{type:"text",id:"name",placeholder:"Name",onChange:this.handleInput,value:a.name,"data-testid":"input-player-name"}),r.a.createElement("input",{type:"text",id:"email",placeholder:"E-mail",onChange:this.handleInput,value:a.email,"data-testid":"input-gravatar-email"}),r.a.createElement("button",{type:"submit",disabled:t.isDisabled,"data-testid":"btn-play",className:"btn-primary"},"Jogar")),r.a.createElement(o.b,{to:"/settings"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",className:q.a.settings},r.a.createElement(R.a,null))),r.a.createElement(P,null))}}]),t}(n.Component),A=Object(c.b)(null,(function(e){return{getToken:function(t){return e(function(e){return function(t){var a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"TOKEN_RESPONSE"}),r.prev=1,r.next=4,f.a.awrap(h());case 4:a=r.sent,n=a.token,t(g(n,e)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),t({type:"TOKEN_ERROR",payload:r.t0});case 12:case"end":return r.stop()}}),null,null,[[1,9]])}}(t))},getQuestions:function(){return e((function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:"GET_QUESTIONS"}),a.prev=1,a.next=4,f.a.awrap(b());case 4:t=a.sent,e(v(t)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e({type:"GET_QUESTIONS_ERROR",payload:a.t0});case 11:case"end":return a.stop()}}),null,null,[[1,8]])}))}}}))(B),J=function(e){function t(){return Object(j.a)(this,t),Object(x.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),t}(r.a.Component),D=a(23),G=a.n(D),L=a(20),U=a.n(L),V=a(37),K=a.n(V);var M=Object(c.b)((function(e){return{user:e.settings.user,totalScore:e.game.totalScore}}))((function(e){var t=e.user,a=e.totalScore,n=String(G()(t.email));return r.a.createElement("div",{className:U.a.header},r.a.createElement("span",{className:U.a.user},r.a.createElement("span",{className:U.a.userPhoto},r.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(n),alt:t.name,"data-testid":"header-profile-picture"})),r.a.createElement("strong",{"data-testid":"header-player-name"},t.name)),r.a.createElement("span",{className:U.a.score},r.a.createElement("div",null,"Pontos:",r.a.createElement("span",{"data-testid":"header-score"},a)),r.a.createElement("img",{src:K.a,alt:"Trof\xe9u"})))})),W=a(41),F=a(24),Z=a(9),z=a.n(Z);var H=function(e){var t=e.answersVisibility,a=e.answersTimeout,n=e.answers,s=e.answerSelection,i=e.nextQuestion;return r.a.createElement("div",{className:"".concat(z.a.answers," ").concat(t)},n.map((function(e){var t=e.question,n=e.difficulty,i=e.dataTestid;return r.a.createElement("button",{key:t,"data-testid":i,type:"button",className:"".concat(z.a.answer,"\n            ").concat("correct-answer"===i?"answer-btn-cor":"answer-btn-inc","\n          "),disabled:a,onClick:function(){return s(i,n)}},Object(F.decode)(t))})),"hidden"!==t&&r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:i,className:"btn-primary ".concat(z.a.nextQuestion)},"Pr\xf3xima"))},Y=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(x.a)(this,Object(T.a)(t).call(this,e))).state={answersVisibility:"hidden",indexQuestion:0,answersTimeout:!1,timer:30,answers:[]},a.timerInterval=null,a.awaitAnswerSelection=null,a.lastQuestion=4,a.correctAnswer="correct-answer",a.answerSelection=a.answerSelection.bind(Object(I.a)(a)),a.nextQuestion=a.nextQuestion.bind(Object(I.a)(a)),a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.initCountdown(),this.shuffleAnswers();var e=this.props.user,t=e.name,a=e.email;localStorage.setItem("state",JSON.stringify({player:{name:t,assertions:0,score:0,gravatarEmail:"https://www.gravatar.com/avatar/".concat(String(G()(a)))}}))}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.indexQuestion;t.indexQuestion!==a&&a<=this.lastQuestion&&(this.initCountdown(),this.shuffleAnswers())}},{key:"nextQuestion",value:function(){var e=this.state.indexQuestion;this.setState({answersVisibility:"hidden",indexQuestion:e<=this.lastQuestion&&e+1,timer:30})}},{key:"initCountdown",value:function(){var e=this;clearInterval(this.timerInterval),clearTimeout(this.awaitAnswerSelection);this.timerInterval=setInterval((function(){var t=e.state.timer;t>0?e.setState({timer:t-1}):(clearInterval(e.timerInterval),e.awaitAnswerSelection=setTimeout((function(){e.setState({answersVisibility:"visible",answersTimeout:!0})}),5e3))}),1e3)}},{key:"shuffleAnswers",value:function(){var e=this.props.questions,t=this.state.indexQuestion,a={question:e[t].correct_answer,difficulty:e[t].difficulty,dataTestid:this.correctAnswer},n=e[t].incorrect_answers.map((function(a,n){return{question:a,difficulty:e[t].difficulty,dataTestid:"wrong-answer-".concat(n)}})),r=[a].concat(Object(W.a)(n));r=r.sort((function(){return Math.random()-.5})),this.setState({answers:r})}},{key:"answerSelection",value:function(e,t){if(this.setState({answersVisibility:"visible"}),e===this.correctAnswer){var a=this.props.upScore,n=10+this.state.timer*{easy:1,medium:2,hard:3}[t];a(n),function(e){var t=JSON.parse(localStorage.getItem("state"));if(t){var a=t.player;localStorage.setItem("state",JSON.stringify({player:Object(d.a)({},a,{assertions:a.assertions+1,score:a.score+e})}))}}(n)}clearInterval(this.timerInterval)}},{key:"render",value:function(){var e=this.props.questions,t=this.state,a=t.answersVisibility,n=t.answersTimeout,s=t.answers,i=t.indexQuestion,o=t.timer;if(i>4)return r.a.createElement(O.a,{to:"/feedback"});return r.a.createElement("div",{className:z.a.questionPage},r.a.createElement("div",{className:z.a.timeBar},r.a.createElement("div",{className:z.a.timeBar_Bar,style:{width:"".concat(3.33*o,"%")}})),r.a.createElement("div",{className:z.a.question},r.a.createElement("span",{"data-testid":"question-category"},e[i].category),r.a.createElement("p",{"data-testid":"question-text"},Object(F.decode)(e[i].question)),r.a.createElement("div",{className:z.a.questionCounter},"Quest\xe3o ".concat(i+1,"/5"))),r.a.createElement(H,{answersVisibility:a,answersTimeout:n,answers:s,nextQuestion:this.nextQuestion,answerSelection:this.answerSelection}))}}]),t}(r.a.Component),$=Object(c.b)((function(e){return{user:e.settings.user,questions:e.game.questions.results}}),(function(e){return{upScore:function(t){return e(function(e){return{type:"ADD_SCORE",payload:e}}(t))}}}))(Y),X=a(39),ee=a(38),te=a.n(ee);var ae=function(){return r.a.createElement("div",{className:te.a.loading},r.a.createElement(X.a,null))},ne=a(40),re=a.n(ne);var se=Object(c.b)((function(e){return{user:e.settings.user,questions:e.game.questions}}))((function(e){var t=e.user,a=e.questions;return!t.name||!a.results?r.a.createElement(ae,null):r.a.createElement("div",{className:re.a.gamePage},r.a.createElement(M,null),r.a.createElement($,null))})),ie=function(e){function t(){return Object(j.a)(this,t),Object(x.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"feedbackInfos",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.score,a=e.assertions;return r.a.createElement("section",null,r.a.createElement("p",{"data-testid":"feedback-text"},a<3?"Podia ser melhor...":"Mandou bem!"),r.a.createElement("p",null,"Pontua\xe7\xe3o Final:",r.a.createElement("span",{"data-testid":"feedback-total-score"},t)),r.a.createElement("p",null,"N\xfamero de acertos:",r.a.createElement("span",{"data-testid":"feedback-total-question"},a)))}},{key:"buttonPlayAgain",value:function(e){return r.a.createElement(o.b,{onClick:e,to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again"},"Jogar Novamente"))}},{key:"buttonRanking",value:function(){return r.a.createElement(o.b,{to:"/ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking"},"Ver Ranking"))}},{key:"render",value:function(){var e=this.props.dispatchReset;return function(){var e=JSON.parse(localStorage.getItem("state")).player,t={name:e.name,score:e.score,picture:e.gravatarEmail},a=function(){return JSON.parse(localStorage.getItem("ranking"))},n=a()?a():[];n.push(t),n.sort((function(e,t){return t.score-e.score})),localStorage.setItem("ranking",JSON.stringify(n))}(),r.a.createElement("section",null,r.a.createElement(M,null),this.feedbackInfos(),this.buttonPlayAgain(e),this.buttonRanking())}}]),t}(r.a.Component),oe=Object(c.b)(null,(function(e){return{dispatchReset:function(){return e({type:"RESET_GAME"})}}}))(ie),ce=a(28),le=a.n(ce);var ue=function(e){var t=e.name,a=e.score,n=e.picture,s=e.position,i=s-1;return r.a.createElement("li",{className:le.a.container},r.a.createElement("span",null,s,"\xb0"),r.a.createElement("figure",null,r.a.createElement("img",{src:n,alt:t})),r.a.createElement("section",{className:le.a.score},r.a.createElement("p",{"data-testid":"player-name-".concat(i)},t),r.a.createElement("hr",null),r.a.createElement("p",null,"Pontua\xe7\xe3o:",r.a.createElement("span",{"data-testid":"player-score-".concat(i)},a))))};var me=Object(c.b)(null,(function(e){return{dispatchReset:function(){return e({type:"RESET_GAME"})}}}))((function(e){var t=e.dispatchReset,a=JSON.parse(localStorage.getItem("ranking"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("ol",null,a.map((function(e,t){return r.a.createElement(ue,Object.assign({key:t},e,{position:t+1}))}))),r.a.createElement(o.b,{"data-testid":"btn-go-home",onClick:t,to:"/"},"Jogar Novamente"))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(c.a,{store:S},r.a.createElement(o.a,null,r.a.createElement((function(){return r.a.createElement(O.d,null,r.a.createElement(O.b,{path:"/feedback",component:oe}),r.a.createElement(O.b,{path:"/game",component:se}),r.a.createElement(O.b,{path:"/settings",component:J}),r.a.createElement(O.b,{path:"/feedback",component:oe}),r.a.createElement(O.b,{path:"/ranking",component:me}),r.a.createElement(O.b,{path:"/",component:A}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports={questionPage:"styles_questionPage__1-Ciy",question:"styles_question__V_-At",answers:"styles_answers__38jRf",answer:"styles_answer__36j9b",nextQuestion:"styles_nextQuestion__3kKLc",timeBar:"styles_timeBar__2CUkI",timeBar_Bar:"styles_timeBar_Bar__2sRHg",questionCounter:"styles_questionCounter__3lZiD"}}},[[42,1,2]]]);
//# sourceMappingURL=main.f30a4573.chunk.js.map